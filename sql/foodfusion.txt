CREATE TABLE `users` (
  `user_id` int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
  `firstname` varchar(100) NOT NULL,
  `lastname` varchar(100) NOT NULL,
  `email` varchar(255) NOT NULL,
  `password` varchar(255) NOT NULL,
  `join_date` date DEFAULT CURRENT_DATE, 
  `failed_attempts` int(11) DEFAULT 0,
  `last_attempt_time` datetime DEFAULT NULL
)
CREATE TABLE `categories` (
    `category_id` int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `category_name` varchar(255) NOT NULL
)

CREATE TABLE `cuisines` (
    `cuisine_id` int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `cuisine_name` varchar(255) NOT NULL
)

CREATE TABLE `dietary_preferences` (
    `dietary_id` int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `dietary_name` varchar(255) NOT NULL
)

CREATE TABLE `difficulties` (
    `difficulty_id` int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `difficulty_level` varchar(255) NOT NULL
)

CREATE TABLE `recipes` (
    `recipe_id` int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `user_id` int(11) NOT NULL,
    `title` varchar(255) NOT NULL,
    `description` TEXT,
    `instructions` TEXT NOT NULL,
    `image_url` varchar(255),
    `category_id` int(11) NOT NULL,
    `cuisine_id` int(11) NOT NULL,
    `dietary_id` int(11) NOT NULL,
    `difficulty_id` int(11) NOT NULL,
    `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
    `is_approved` boolean DEFAULT TRUE,
    `is_featured` boolean DEFAULT FALSE,
    FOREIGN KEY(`user_id`) REFERENCES users(`user_id`),
    FOREIGN KEY(`category_id`) REFERENCES categories(`category_id`),
    FOREIGN KEY(`cuisine_id`) REFERENCES cuisines(`cuisine_id`),
    FOREIGN KEY(`dietary_id`) REFERENCES dietary_preferences(`dietary_id`),
    FOREIGN KEY(`difficulty_id`) REFERENCES difficulties(`difficulty_id`)
)

CREATE TABLE `submissions` (
    `submission_id` int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `user_id` int(11) NOT NULL,
    `title` varchar(255) NOT NULL,
    `story` text,
    `image_url` varchar(255),
    `is_approved` boolean DEFAULT TRUE,
    `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(`user_id`) REFERENCES users(`user_id`)
)

CREATE TABLE `comments` (
    `comment_id` int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `user_id` int(11) NOT NULL,
    `submission_id` int(11) NOT NULL,
    `content` TEXT,
    created_at datetime DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(`user_id`) REFERENCES users(`user_id`),
    FOREIGN KEY(`submission_id`) REFERENCES submissions(`submission_id`)
)

CREATE TABLE `contact_messages` (
    `message_id` int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `user_id` int(11) NOT NULL,
    `name` varchar(50) NOT NULL,
    `email` varchar(255) NOT NULL,
    `subject` varchar(255),
    `message` text NOT NULL,
    created_at datetime DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(`user_id`) REFERENCES users(`user_id`)
)

CREATE TABLE `resource_types` (
    `type_id` int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `type_name` varchar(255) NOT NULL
)

CREATE TABLE `resources` (
    `resource_id` int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `user_id` int(11) NOT NULL,
    `type_id` int(11) NOT NULL,
    `topic` varchar(255) NOT NULL,
    `description` TEXT,
    `content` TEXT,
    `file_name` varchar(255) NOT NULL,
    `file_type` varchar(100) NOT NULL,
    `file_size` int(11) NOT NULL,
    `file_data` LONGBLOB,
    `uploaded_at` datetime DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(`user_id`) REFERENCES users(`user_id`),
    FOREIGN KEY(`type_id`) REFERENCES resource_types(`type_id`)
)

CREATE TABLE `events` (
    `event_id` int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `event_name` varchar(255) NOT NULL,
    `user_id` int(11) NOT NULL,
    `title` varchar(255) NOT NULL,
    `description` TEXT,
    `event_type` varchar(100) NOT NULL,
    `location` varchar(100) NOT NULL,
    `start_datetime` datetime,
    `end_datetime` datetime,
    `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(`user_id`) REFERENCES users(`user_id`)
)